<nz-card nzTitle="ReseÃ±as del restaurante">

  <div *ngIf="loading">Cargando reseÃ±as...</div>

  <nz-card
    *ngFor="let r of reviews"
    class="review-card">

    <div class="header">
      <strong>{{ r.user?.fullName || 'Usuario' }}</strong>
      <nz-rate [ngModel]="r.rating" nzDisabled></nz-rate>
    </div>

    <p class="text">
      {{ r.reviewText || 'Sin comentario' }}
    </p>

    <div class="footer">
      <span class="date">
        {{ r.createdAt | date:'mediumDate' }}
      </span>

      <div class="actions">
        <!-- ğŸš© BADGE -->
        <span
          *ngIf="r.isReported"
          class="reported-badge">
          ğŸš© Reportada
        </span>

        <!-- BOTÃ“N ACTIVO -->
        <button
          nz-button
          nzType="default"
          nzDanger
          *ngIf="!r.isReported"
          (click)="report(r)">
          Reportar
        </button>

        <!-- BOTÃ“N DESHABILITADO -->
        <button
          nz-button
          nzType="default"
          disabled
          *ngIf="r.isReported">
          Reportada
        </button>
      </div>
    </div>

  </nz-card>

  <div *ngIf="!loading && reviews.length === 0" class="empty">
    No hay reseÃ±as aÃºn
  </div>

</nz-card>

<!-- MODAL -->
<ng-template #reportTpl>
  <textarea
    nz-input
    rows="4"
    placeholder="Describe el motivo del reporte"
    [(ngModel)]="reportReason"
    style="width:100%">
  </textarea>
</ng-template>
