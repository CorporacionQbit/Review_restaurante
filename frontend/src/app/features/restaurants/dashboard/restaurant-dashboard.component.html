<div class="dashboard-wrapper">

  <div *ngIf="loading" class="dashboard-loading">
    Cargando dashboard...
  </div>

  <div *ngIf="!loading" class="restaurant-dashboard">

    <!-- ================= HERO ================= -->
    <section class="dashboard-hero">
      <div class="hero-left">
        <h1>{{ restaurant.name }}</h1>

        <div class="hero-meta">
          <span
            class="badge"
            [ngClass]="restaurant.onboardingStatus?.toLowerCase()">
            {{ restaurant.onboardingStatus }}
          </span>

          <span *ngIf="restaurant.isPremium" class="badge premium">
            â­ Premium
          </span>
        </div>

        <p class="hero-hint">
          Completa tu perfil para aparecer mejor posicionado
        </p>
      </div>

      <div class="hero-right">
        <span class="progress-label">Perfil completado</span>
        <strong class="progress-value">{{ progress }}%</strong>

        <div class="progress-bar">
          <div class="progress-fill" [style.width.%]="progress"></div>
        </div>

        <small class="progress-help">
          {{ missingSteps }}
        </small>
      </div>
    </section>

    <!-- ================= KPIs ================= -->
    <section class="metrics">
      <div class="metric-card">
        <span class="metric-icon">â­</span>
        <div>
          <small>Rating</small>
          <strong>{{ restaurant.avgRating || 0 }}</strong>
        </div>
      </div>

      <div class="metric-card">
        <span class="metric-icon">ğŸ“</span>
        <div>
          <small>ReseÃ±as</small>
          <strong>{{ restaurant.totalReviews || 0 }}</strong>
        </div>
      </div>

      <div class="metric-card">
        <span class="metric-icon">ğŸ“¸</span>
        <div>
          <small>ImÃ¡genes</small>
          <strong>{{ restaurant.images?.length || 0 }}</strong>
        </div>
      </div>

      <div class="metric-card">
        <span class="metric-icon">ğŸ“°</span>
        <div>
          <small>Posts</small>
          <strong>{{ restaurant.posts?.length || 0 }}</strong>
        </div>
      </div>
    </section>

    <!-- ================= PRIMARY ACTION ================= -->
    <section class="primary-action">
      <div>
        <h2>Completa tu perfil</h2>
        <p>Los restaurantes completos reciben mÃ¡s visitas</p>
      </div>

      <button nz-button nzType="primary" (click)="go('images')">
        Subir imÃ¡genes
      </button>
    </section>

    <!-- ================= ACTIONS ================= -->
    <section class="actions-grid">

      <div class="action-card" (click)="go('images')">
        <span class="icon">ğŸ“¸</span>
        <h3>ImÃ¡genes</h3>
        <p>Administra fotos del restaurante</p>
      </div>

      <div class="action-card" (click)="go('map')">
        <span class="icon">ğŸ—ºï¸</span>
        <h3>UbicaciÃ³n</h3>
        <p>Configura el mapa</p>
      </div>

      <div
        class="action-card premium-card"
        [class.locked]="!restaurant.isPremium"
        (click)="restaurant.isPremium && go('menu')">
        <span class="icon">ğŸ“„</span>
        <h3>MenÃº</h3>
        <p>{{ restaurant.isPremium ? 'Visible al pÃºblico' : 'Solo Premium' }}</p>
      </div>

      <div
        class="action-card premium-card"
        [class.locked]="!restaurant.isPremium"
        (click)="restaurant.isPremium && go('posts')">
        <span class="icon">ğŸ“°</span>
        <h3>Posts</h3>
        <p>{{ restaurant.isPremium ? 'Promociones' : 'Solo Premium' }}</p>
      </div>

      <div class="action-card subscription-card" (click)="go('subscription')">
        <span class="icon">ğŸ’³</span>
        <h3>SuscripciÃ³n</h3>
        <p>
          {{ restaurant.isPremium ? 'Plan Premium activo' : 'Mejorar a Premium' }}
        </p>
      </div>

      <div class="action-card" (click)="go('reviews')">
        <span class="icon">ğŸ›¡ï¸</span>
        <h3>ReseÃ±as</h3>
        <p>Gestiona reseÃ±as</p>
      </div>

    </section>

  </div>
</div>
