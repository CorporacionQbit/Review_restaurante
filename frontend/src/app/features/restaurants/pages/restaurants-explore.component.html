<div class="explore-container">

  <!-- ================= HEADER ================= -->
  <header class="explore-header">

    <!-- TOP BAR -->
    <div class="header-top">

      <!-- TITLE -->
      <div class="header-title">
        <h1>Descubre restaurantes</h1>
        <p>Encuentra los mejores lugares según tu gusto</p>
      </div>

      <!-- USER ACTIONS -->
      <div class="header-actions">

        <!-- PERFIL -->
        <div class="profile-chip" (click)="goToProfile()">
          <div class="avatar">S</div>
          <span>Mi perfil</span>
        </div>

        <!-- LOGOUT -->
        <button
          nz-button
          nzType="default"
          nzDanger
          (click)="logout()">
          Cerrar sesión
        </button>

      </div>
    </div>

    <!-- FILTERS -->
    <div class="filters">

      <input
        nz-input
        placeholder="Buscar restaurante..."
        [(ngModel)]="filters.search"
      />

      <input
        nz-input
        placeholder="Ciudad"
        [(ngModel)]="filters.city"
      />

      
      <nz-select
        nzAllowClear
        nzPlaceHolder="Rating mínimo"
        [(ngModel)]="filters.minRating"
      >
        <nz-option nzValue="1" nzLabel="★ 1+"></nz-option>
        <nz-option nzValue="2" nzLabel="★ 2+"></nz-option>
        <nz-option nzValue="3" nzLabel="★ 3+"></nz-option>
        <nz-option nzValue="4" nzLabel="★ 4+"></nz-option>
        <nz-option nzValue="5" nzLabel="★ 5"></nz-option>
      </nz-select>

      <button nz-button nzType="primary" (click)="loadRestaurants()">
        Buscar
      </button>

      <button nz-button nzType="default" (click)="clearFilters()">
        Limpiar
      </button>

    </div>
  </header>

  <!-- ================= GRID ================= -->
  <section class="grid">

    <div
      class="card"
      *ngFor="let r of restaurants"
      (click)="goToDetail(r.restaurantId)"
    >

      <!-- IMAGE -->
      <div
        class="image"
        *ngIf="getImageUrl(r); else placeholder"
        [style.backgroundImage]="'url(' + getImageUrl(r) + ')'"
      ></div>

      <ng-template #placeholder>
        <div class="placeholder">
          {{ r.name.charAt(0) }}
        </div>
      </ng-template>

      <!-- BODY -->
      <div class="card-body">

        <h3>{{ r.name }}</h3>
        <p>{{ r.description || 'Sin descripción' }}</p>

        <div class="rating">
          <span class="star" *ngFor="let s of starsArray(r.avgRating)">★</span>
          <span class="muted">
            {{ r.avgRating || 0 }} · {{ r.totalReviews }} reseñas
          </span>
        </div>

        <span *ngIf="r.isPremium" class="badge">
          Premium
        </span>

      </div>
    </div>

  </section>

  <!-- ================= PAGINATION ================= -->
  <div class="pagination" *ngIf="meta">

    <button
      nz-button
      (click)="prevPage()"
      [disabled]="!meta.hasPrevPage"
    >
      ← Anterior
    </button>

    <span>
      Página {{ meta.page }} de {{ meta.totalPages }}
    </span>

    <button
      nz-button
      nzType="primary"
      (click)="nextPage()"
      [disabled]="!meta.hasNextPage"
    >
      Siguiente →
    </button>

  </div>
<footer class="app-footer">
  <h4>Descubre restaurantes</h4>
  <p>Encuentra los mejores lugares para comer cerca de ti</p>
</footer>

</div>
