<div class="approval-page">

  <!-- HERO -->
  <div class="approval-hero">
    <h1>üçΩÔ∏è Restaurantes pendientes de aprobaci√≥n</h1>
    <p>Valida y controla los restaurantes antes de que se publiquen</p>
  </div>

  <!-- CARD -->
  <div class="approval-card">

    <nz-table
      [nzData]="restaurants"
      [nzLoading]="loading"
      nzBordered>

      <thead>
        <tr>
          <th>Restaurante</th>
          <th>Due√±o</th>
          <th>Ciudad</th>
          <th>Estado</th>
          <th>Acciones</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let r of restaurants">
          <td class="restaurant-name">{{ r.name }}</td>
          <td class="owner-email">{{ r.owner.email }}</td>
          <td>{{ r.city || '‚Äî' }}</td>
          <td>
            <span class="status pending">
              {{ r.onboardingStatus }}
            </span>
          </td>
          <td class="actions">

            <button
              nz-button
              nzType="default"
              class="btn-docs"
              (click)="openDocuments(r)">
              üìÑ Ver documentos
            </button>

            <button
              nz-button
              nzType="primary"
              class="btn-approve"
              (click)="approve(r)">
              Aprobar
            </button>

            <button
              nz-button
              nzDanger
              class="btn-reject"
              (click)="openReject(r)">
              Rechazar
            </button>
          </td>
        </tr>
      </tbody>
    </nz-table>
  </div>

  <!-- üìÑ MODAL DOCUMENTOS -->
  <nz-modal
    [(nzVisible)]="documentsModalVisible"
    nzTitle="üìÑ Documentos del restaurante"
    (nzOnCancel)="documentsModalVisible = false"
    [nzFooter]="null"
    nzWidth="600px">

    <ng-container *nzModalContent>

      <div *ngIf="documentsLoading">Cargando documentos...</div>

      <div *ngIf="!documentsLoading && documents.length === 0">
        No hay documentos subidos.
      </div>

      <div *ngFor="let d of documents" class="document-row">
        <div>
          <strong>{{ d.docType }}</strong>
          <span
            class="badge"
            [class.verified]="d.isVerified">
            {{ d.isVerified ? 'Verificado' : 'Pendiente' }}
          </span>
        </div>

        <a
          [href]="apiUrl + '/' + d.fileUrl"
          target="_blank">
          Ver documento
        </a>
      </div>

    </ng-container>
  </nz-modal>

</div>
